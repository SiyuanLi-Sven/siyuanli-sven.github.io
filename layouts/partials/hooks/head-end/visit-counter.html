<script>
// 访问计数器动态加载 - 仅在首页加载
document.addEventListener('DOMContentLoaded', function() {
    // 只在首页加载访问计数器
    if (window.location.pathname !== '/' && window.location.pathname !== '/index.html') {
        return;
    }
    
    // 延迟加载以确保页面完全渲染
    setTimeout(function() {
        // 创建计数器容器
        const counterContainer = document.createElement('div');
        counterContainer.id = 'visit-counter';
        counterContainer.style.cssText = `
            text-align: center;
            margin: 2rem 0;
            padding: 1rem 0;
            border-top: 1px solid #e5e7eb;
            opacity: 0;
            transition: opacity 0.3s ease-in-out;
        `;
        
        // 创建图片元素
        const counterImg = document.createElement('img');
        const counterUrl = 'https://count.getloli.com/@siyuanli-sven?' + 
                          'name=siyuanli-sven&theme=moebooru&padding=7&offset=0&' +
                          'align=top&scale=1&pixelated=1&darkmode=auto';
        
        counterImg.src = counterUrl;
        counterImg.alt = '访问计数';
        counterImg.style.cssText = `
            max-width: 100%;
            height: auto;
            border: none;
        `;
        
        // 创建感谢文字
        const thankText = document.createElement('p');
        thankText.textContent = '感谢您的访问';
        thankText.style.cssText = `
            margin-top: 0.5rem;
            font-size: 0.875rem;
            color: #6b7280;
            margin-bottom: 0;
        `;
        
        // 图片加载完成后显示
        counterImg.onload = function() {
            counterContainer.style.opacity = '1';
        };
        
        // 错误处理
        counterImg.onerror = function() {
            counterContainer.style.display = 'none';
        };
        
        counterContainer.appendChild(counterImg);
        counterContainer.appendChild(thankText);
        
        // 插入到页面底部（在footer之前）
        const footer = document.querySelector('footer');
        if (footer) {
            footer.parentNode.insertBefore(counterContainer, footer);
        } else {
            document.body.appendChild(counterContainer);
        }
    }, 1000); // 延迟1秒加载
});
</script>