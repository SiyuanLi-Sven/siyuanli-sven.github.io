<script>
// åŒå±‚èƒŒæ™¯ç³»ç»Ÿï¼šå¿ å®ä½¿ç”¨assets/media HTMLæ–‡ä»¶é€šè¿‡iframe
document.addEventListener('DOMContentLoaded', function() {
    // å»¶è¿ŸåŠ è½½ç¡®ä¿é¡µé¢å®Œå…¨æ¸²æŸ“
    setTimeout(function() {
        
        // === 1. å…ˆåˆ›å»ºMatrix About MeèƒŒæ™¯iframe ===
        createMatrixAboutMeBackgroundIframe();
        
        // === 2. å¤‡ç”¨MLPèƒŒæ™¯åŠ è½½æœºåˆ¶ï¼Œé˜²æ­¢MatrixåŠ è½½å¤±è´¥æ—¶MLPæ°¸è¿œä¸åŠ è½½ ===
        setTimeout(function() {
            if (!document.getElementById('mlp-background-iframe')) {
                console.log('ğŸ”„ Fallback: Loading MLP background (Matrix may have failed)');
                createMLPBackgroundIframe();
            }
        }, 3000); // 3ç§’åå¦‚æœMLPè¿˜æœªåŠ è½½ï¼Œå¼ºåˆ¶åŠ è½½
        
    }, 1000);
});

// MLPç¥ç»ç½‘ç»œå…¨ç«™èƒŒæ™¯ - ä½¿ç”¨staticç›®å½•
function createMLPBackgroundIframe() {
    const mlpIframe = document.createElement('iframe');
    mlpIframe.id = 'mlp-background-iframe';
    mlpIframe.src = '/backgrounds/mlp-bg.html';
    mlpIframe.style.cssText = `
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        z-index: -2000;
        pointer-events: none;
        border: none;
        opacity: 0.3;
        background: transparent;
    `;
    
    mlpIframe.onload = function() {
        console.log('âœ… MLP background loaded successfully from /backgrounds/mlp-bg.html');
    };
    
    mlpIframe.onerror = function() {
        console.warn('âŒ Failed to load MLP background, removing iframe');
        mlpIframe.remove();
    };
    
    document.body.insertBefore(mlpIframe, document.body.firstChild);
}

// Matrix About MeèƒŒæ™¯ - ä½¿ç”¨staticç›®å½•
function createMatrixAboutMeBackgroundIframe() {
    setTimeout(function() {
        // å¯»æ‰¾About Me section 
        const aboutSection = 
            document.querySelector('[class*="resume-biography"]') || 
            document.querySelector('[class*="biography"]') ||
            document.querySelector('.hero-section') ||
            document.querySelector('section[class*="dark"]') ||
            document.querySelector('section:first-of-type');
        
        console.log('Looking for About Me section:', aboutSection);
        if (!aboutSection) {
            console.warn('Could not find About Me section for Matrix background');
            // About Me sectionæ‰¾ä¸åˆ°æ—¶ï¼Œç«‹å³åŠ è½½MLPèƒŒæ™¯
            if (!document.getElementById('mlp-background-iframe')) {
                console.log('ğŸ”„ No About Me section, loading MLP background immediately');
                createMLPBackgroundIframe();
            }
            return;
        }
        
        const matrixIframe = document.createElement('iframe');
        matrixIframe.id = 'matrix-aboutme-background-iframe';
        matrixIframe.src = '/backgrounds/matrix-transform-bg.html';
        matrixIframe.style.cssText = `
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            pointer-events: none;
            border: none;
            opacity: 0.8;
            background: transparent;
        `;
        
        matrixIframe.onload = function() {
            console.log('âœ… Matrix background loaded successfully from /backgrounds/matrix-transform-bg.html');
            // MatrixåŠ è½½å®Œæˆåï¼Œå»¶è¿ŸåŠ è½½MLPèƒŒæ™¯ï¼ˆå¦‚æœè¿˜æœªåŠ è½½ï¼‰
            if (!document.getElementById('mlp-background-iframe')) {
                setTimeout(function() {
                    console.log('ğŸ”„ Starting MLP background after Matrix loaded');
                    createMLPBackgroundIframe();
                }, 300);
            }
        };
        
        matrixIframe.onerror = function() {
            console.warn('âŒ Failed to load Matrix background, removing iframe');
            matrixIframe.remove();
            // MatrixåŠ è½½å¤±è´¥æ—¶ï¼Œç«‹å³å°è¯•åŠ è½½MLPèƒŒæ™¯
            if (!document.getElementById('mlp-background-iframe')) {
                console.log('ğŸ”„ Matrix failed, loading MLP background immediately');
                setTimeout(function() {
                    createMLPBackgroundIframe();
                }, 100);
            }
        };
        
        // åˆ›å»ºåŒ…è£…å®¹å™¨æ¥æ§åˆ¶å±‚çº§
        const backgroundWrapper = document.createElement('div');
        backgroundWrapper.id = 'matrix-background-wrapper';
        backgroundWrapper.style.cssText = `
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1500;
            pointer-events: none;
            background: #0d1117;
        `;
        
        backgroundWrapper.appendChild(matrixIframe);
        
        // ç¡®ä¿sectionæœ‰relativeå®šä½å’Œå±‚çº§ä¸Šä¸‹æ–‡
        aboutSection.style.position = 'relative';
        aboutSection.style.zIndex = '0';
        aboutSection.insertBefore(backgroundWrapper, aboutSection.firstChild);
        
        // è°ƒè¯•ä¿¡æ¯
        console.log('Matrix background wrapper created and inserted');
        console.log('About section style:', {
            position: aboutSection.style.position,
            zIndex: aboutSection.style.zIndex,
            height: aboutSection.offsetHeight + 'px',
            width: aboutSection.offsetWidth + 'px'
        });
        
    }, 2000); // å»¶è¿Ÿ2ç§’ï¼Œç¡®ä¿é¡µé¢ç»“æ„ç¨³å®š
}
</script>